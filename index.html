<!DOCTYPE html>
<html>
<head>
    <title>Matemágica</title>
</head>
<body>

    <select id="opcoes" onchange="selecionaTipoDeQuestao()">
        <option value="somaSimples">Soma Simples</option>
        <option value="subtracaoSimples">Subtração Simples</option>
        <option value="multiplicacaoSimples">Multiplicação Simples</option>
        <option value="divisaoSimples">Divisão Simples</option>
        <option value="somaMultiplosDigitos">Soma com Múltiplos Dígitos</option>
        <option value="subtracaoMultiplosDigitos">Subtração com Múltiplos Dígitos</option>
        <option value="multiplicacaoMultiplosDigitos">Multiplicação com Múltiplos Dígitos</option>
        <option value="divisaoComMultiplosDigitos">Divisão com Múltiplos Dígitos</option>
        <option value="divisaoRacional">Divisão com resultado fracionado</option>
    </select>

    <p id="texto-questao">2 + 2 = x</p>

    <button onclick="checaQuestao('a')"><p id="a">1</p></button><br>
    <button onclick="checaQuestao('b')"><p id="b">2</p></button><br>
    <button onclick="checaQuestao('c')"><p id="c">3</p></button><br>
    <button onclick="checaQuestao('d')"><p id="d">4</p></button><br>

    <button onclick="textoDaQuestao()">Nova questão</button>

    <script>
        let respostaDaQuestao = 4;
        let tipoDeQuestao = "somaSimples";

        function textoDaQuestao() {
            var paragraph = document.getElementById("texto-questao");

            // chama função
            if (tipoDeQuestao === "somaSimples") {
                questao = questaoSomaSimples(1,10);
            } else if (tipoDeQuestao === "subtracaoSimples") {
                questao = questaoSubtracaoSimples(6,10,1,5);
            } else if (tipoDeQuestao === "multiplicacaoSimples") {
                questao = multiplicacaoSimples(1,10);
            } else if (tipoDeQuestao === "divisaoSimples") {
                questao = divisaoSimples(1,20);
            } else if (tipoDeQuestao === "somaMultiplosDigitos") {
                questao = questaoSomaSimples(100,999);
            } else if (tipoDeQuestao === "subtracaoMultiplosDigitos") {
                questao = questaoSubtracaoSimples(500,999,100,499);
            } else if (tipoDeQuestao === "multiplicacaoMultiplosDigitos") {
                questao = multiplicacaoSimples(1,99);
            } else if (tipoDeQuestao === "divisaoComMultiplosDigitos") {
                questao = divisaoSimples(10,99);
            } else if (tipoDeQuestao === "divisaoRacional") {
                questao = divisaoRacional(10, 99);
            } else if (tipoDeQuestao === "outro") {
                console.log(tipoDeQuestao)
            }
            
            paragraph.textContent = questao;
        }

        function textoDasRespostas(vetorResposta) {
            var paragrafoA = document.getElementById("a");
            var paragrafoB = document.getElementById("b");
            var paragrafoC = document.getElementById("c");
            var paragrafoD = document.getElementById("d");

            paragrafoA.textContent = vetorResposta[0];
            paragrafoB.textContent = vetorResposta[1];
            paragrafoC.textContent = vetorResposta[2];
            paragrafoD.textContent = vetorResposta[3];
        }

        function questaoSomaSimples(min, max) {
            let primeiroNumero = getRandomInt(min, max);
            let segundoNumero = getRandomInt(min, max);
            let questao = `${primeiroNumero} + ${segundoNumero} = x`;
            respostaDaQuestao = primeiroNumero + segundoNumero;
            let vetorResposta = fazVetorResposta(respostaDaQuestao);
            
            // escreve respostas possíveis
            textoDasRespostas(vetorResposta);

            return questao;
        }

        function questaoSubtracaoSimples(min1, max1, min2, max2) {
            let primeiroNumero = getRandomInt(min1, max1);
            let segundoNumero = getRandomInt(min2, max2);
            let questao = `${primeiroNumero} - ${segundoNumero} = x`;
            respostaDaQuestao = primeiroNumero - segundoNumero;
            let vetorResposta = fazVetorResposta(respostaDaQuestao);
            
            // escreve respostas possíveis
            textoDasRespostas(vetorResposta);

            return questao;
        }

        function multiplicacaoSimples(min, max) {
            let primeiroNumero = getRandomInt(min, max);
            let segundoNumero = getRandomInt(min, max);
            let questao = `${primeiroNumero} x ${segundoNumero} = x`;
            respostaDaQuestao = primeiroNumero * segundoNumero;
            let vetorResposta = fazVetorResposta(respostaDaQuestao);
            
            // escreve respostas possíveis
            textoDasRespostas(vetorResposta);

            return questao;
        }

        function divisaoSimples(min, max) {
            respostaDaQuestao = getRandomInt(min, max);
            let segundoNumero = getRandomInt(min, max);
            let primeiroNumero = respostaDaQuestao * segundoNumero;
            let questao = `${primeiroNumero} ÷ ${segundoNumero} = x`;
            let vetorResposta = fazVetorResposta(respostaDaQuestao);
            
            // escreve respostas possíveis
            textoDasRespostas(vetorResposta);

            console.log("Resposta da questão: " + respostaDaQuestao);

            return questao;
        }

        function divisaoRacional(min, max) {
            while (true) {
                primeiroNumero = getRandomInt(min, max);
                segundoNumero = getRandomInt(min, max);
                if (primeiroNumero % segundoNumero > 0) {
                    break;
                }
            }
            respostaDaQuestao = primeiroNumero / segundoNumero;
            respostaDaQuestao = respostaDaQuestao.toFixed(2);
            let questao = `${primeiroNumero} ÷ ${segundoNumero} = x`;
            let vetorResposta = fazVetorResposta(respostaDaQuestao);
            
            // escreve respostas possíveis
            textoDasRespostas(vetorResposta);

            console.log("Resposta da questão: " + respostaDaQuestao);

            return questao;
        }

        function fazVetorResposta(resposta) {
            let tipo = getRandomInt(1, 4);

            if (resposta < 200) {
                if (tipo === 1) {
                    return [resposta, resposta + 1, resposta -1, resposta + 2];
                } else if (tipo === 2) {
                    return [resposta + 1, resposta, resposta + 2, resposta -1];
                } else if (tipo === 3){
                    return [resposta -1, resposta + 2, resposta, resposta - 2];
                } else if (tipo === 4) {
                    return [resposta + 2, resposta -1, resposta - 2, resposta];
                }
            } else {
                if (tipo === 1) {
                    return [resposta, resposta + 120, resposta - 10, resposta + 10];
                } else if (tipo === 2) {
                    return [resposta + 40, resposta, resposta - 20, resposta - 120];
                } else if (tipo === 3){
                    return [resposta - 110, resposta + 20, resposta, resposta + 40];
                } else if (tipo === 4) {
                    return [resposta + 120, resposta -10, resposta - 20, resposta];
                }
            }
        }

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function checaQuestao(letra) {
            var paragrafo = document.getElementById(letra);

            if (paragrafo) {
                console.log(paragrafo.textContent + " - " + respostaDaQuestao);
                if (parseInt(paragrafo.textContent) === respostaDaQuestao) {
                    alert("Resposta correta!");
                } else {
                    alert("Resposta incorreta. Tente novamente!");
                }
            } else {
                console.log("No paragraph found with id: " + letra);
            }
        }

        //////
        function selecionaTipoDeQuestao() {
            var select = document.getElementById("opcoes");
            tipoDeQuestao = select.value;

            console.log("Tipo de questão selecionada: " + tipoDeQuestao);
        }
    </script>

</body>
</html>